<section class="vh-100" class="wrapper">
  <div class="container h-100">
    <div class="row d-flex justify-content-center align-items-center h-100">
      <div class="col-lg-12 col-xl-11">
        <div class="card text-black" style="border-radius: 25px; margin: 25px">
          <div class="card-body p-md-5">
            <div class="row justify-content-center">
              <div class="col-md-10 col-lg-7 col-xl-6 order-2 order-lg-1">
                <p class="text-center h1 fw-bold mb-5 mx-1 mx-md-4 mt-4 form-header">
                  ДАННИ ЗА ЗАСТРАХОВАНИЯ ИМОТ
                </p>

                <form
                  class="mx-1 mx-md-4"
                  style="display: flex; flex-direction: column; align-items: center"
                  [formGroup]="form"
                >
                  <mat-form-field class="example-full-width field">
                    <mat-label>Размер на имота в кв. м.</mat-label>
                    <input matInput formControlName="size" pattern="[0-9]+" />
                  </mat-form-field>
                  <mat-form-field class="example-full-width field">
                    <mat-label>Обект на застраховане</mat-label>
                    <mat-select formControlName="propertyType">
                      <mat-option value="Апартамент">Апартамент</mat-option>
                      <mat-option value="Къща">Къща</mat-option>
                      <mat-option value="Търговски имот">Търговски имот</mat-option>
                    </mat-select>
                  </mat-form-field>

                  <!-- City Input with Auto-Complete Suggestions -->
                  <mat-form-field>
                    <mat-label>Населено място</mat-label>
                    <input
                      matInput
                      formControlName="city"
                      (input)="fetchCitySuggestions()"
                      placeholder="Започнете да пишете град"
                    />
                  </mat-form-field>
                  <ul *ngIf="citySuggestions.length > 0" id="autocomplete-results">
                    <li
                      *ngFor="let suggestion of citySuggestions"
                      (click)="selectCity(suggestion)"
                      style="cursor: pointer;"
                    >
                      {{ suggestion.name }}
                    </li>
                  </ul>

                  <mat-form-field>
                    <mat-label>Адрес</mat-label>
                    <input
                      matInput
                      id="address"
                      formControlName="address"
                      (input)="fetchAutocomplete()"
                      placeholder="Въведете адрес"
                    />
                  </mat-form-field>
                  <ul id="autocomplete-results">
                    <li
                      *ngFor="let suggestion of suggestions"
                      (click)="selectAddress(suggestion)"
                      style="cursor: pointer;"
                    >
                      {{ suggestion.display_name }}
                    </li>
                  </ul>

                  <div class="d-flex justify-content-center mx-4 mb-3 mb-lg-4">
                    <button
                      type="button"
                      class="btn submit"
                      [disabled]="form.status !== 'VALID'"
                      (click)="continue()"
                    >
                      Продължи
                    </button>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
